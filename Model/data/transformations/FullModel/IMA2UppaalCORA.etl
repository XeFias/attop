import "IMA2UppaalCommon.etl";

pre {
	System.out.println("IMA2UppaalCORA.etl:pre");
}

rule Base
	transform ima : IMA!InterimAutomaton
	to out : Uppaal!NSTA {
	
	System.out.println("ETL>Base IMA!InterimAutomation -> Uppaal!NSTA >>");
	out.int = new Uppaal!PredefinedType();
	out.int.name = "int";
	out.int.type = Uppaal!BuiltInType#INT;
	out.chan  = new Uppaal!PredefinedType();
	out.chan.name = "chan";
	out.chan.type = Uppaal!BuiltInType#CHAN;
	out.bool  = new Uppaal!PredefinedType();
	out.bool.name = "bool";
	out.bool.type = Uppaal!BuiltInType#BOOL;
	out.void  = new Uppaal!PredefinedType();
	out.void.name = "void";
	out.void.type = Uppaal!BuiltInType#VOID;
	out.clock  = new Uppaal!PredefinedType();
	out.clock.name = "clock";
	out.clock.type = Uppaal!BuiltInType#CLOCK;
	out.double  = new Uppaal!DoubleType();

	out.systemDeclarations = new Uppaal!SystemDeclarations();
	out.systemDeclarations.system = new Uppaal!System();
	var iList = new Uppaal!InstantiationList();
	out.systemDeclarations.system.instantiationList.add(iList);

	out.addTopLevel( ima, true );
}
